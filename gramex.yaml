# Generated by gramex init 1.57.0 (don't delete this line)
# on 2020-02-04 by Nikhil Kabbin <nikhil.kabbin@gramener.com>

# Configurations for app: adverse-events v1
# ----------------------------------------------------------------------------

variables:
  day-wise-events:
    header: "Day-wise No. of Events"
    description: "The below visual shows the number of events occurred in the selected year. \
                  Each cell represent a day and the colour is based on the number of events occurred on that particular day."
  manufacturer-wise-events:
    header: "Manufacturer-wise No. of Events"
    description: "The below visual shows the number of events against manufacturer in the selected year. \
                  The colour of each box represent the frequency of events occurred. Darker the colour, higher the frequency."
    local_filters:
      radio_buttons:
        default: manufacture-agegroup
        values:
          manufacture-agegroup: "Manufacture Vs Age group"
          manufacture-outcome: "Manufacture Vs Outcome"
  serious-events-report:
    header: "Serious report"
    description: "The below visual shows two dimensions i.e. Size & Colour. Size is the Total reports of adverse events (Death, Life-Threatening, \
                  Hospitalization, Disability, Congenital Anomaly, Required Intervention & Other Serious Report) whereas Colour is the percentage \
                  of serious reports amongst the total adverse events (Death, Life-Threatening, Disability & Other Serious Events)"
    local_filters:
      radio_buttons:
        default: manufacturer-wise
        values:
          manufacturer-wise: "Manufacture wise"
          reporter-occupation-wise: "Reporter occupatioon wise"
          age-group-wise: "Age group wise"

url:
  adverse-events-v1-home:
    pattern: /$YAMLURL/
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/index.html
      template: true
      headers:
        # Templates may have user-specific content. Cache privately.
        # Keep max-age small (in case we log out & log in as another user.)
        Cache-Control: private, max-age=1
    cache: {expiry: {duration: 1}}

  # Day Wise Events HTML Page
  adverse-events-v1-day-wise-events:
    pattern: /$YAMLURL/day-wise-events
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/day-wise-events.html
      template: true
      headers:
        # Templates may have user-specific content. Cache privately.
        # Keep max-age small (in case we log out & log in as another user.)
        Cache-Control: private, max-age=1
    cache: {expiry: {duration: 1}}

  # Manufacturer Wise Events HTML Page
  adverse-events-v1-manufacturer-wise-events:
    pattern: /$YAMLURL/manufacturer-wise-events
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/manufacturer-wise-events.html
      template: true
      headers:
        # Templates may have user-specific content. Cache privately.
        # Keep max-age small (in case we log out & log in as another user.)
        Cache-Control: private, max-age=1
    cache: {expiry: {duration: 1}}

  # Serious Events HTML Page
  adverse-events-v1-serious-events:
    pattern: /$YAMLURL/serious-events
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/serious-events-report.html
      template: true
      headers:
        # Templates may have user-specific content. Cache privately.
        # Keep max-age small (in case we log out & log in as another user.)
        Cache-Control: private, max-age=1
    cache: {expiry: {duration: 1}}

  # Data API's
  # Day wise events data
  adverse-events-v1-day-wise-events-data:
    pattern: /$YAMLURL/day-wise-events-data
    handler: FormHandler
    kwargs:
      url: sqlite:///$YAMLPATH/data/data.db
      table: calendar

  # Manufacturer wise events data
  adverse-events-v1-manufacturer-wise-events-data:
    pattern: /$YAMLURL/manufacturer-wise-data
    handler: FormHandler
    kwargs:
      url: sqlite:///$YAMLPATH/data/data.db
      table: mfr
      modify: adverse_events.mfr_data(data, handler)

  # Serious events wise data
  adverse-events-v1-serious-events-data:
    pattern: /$YAMLURL/serious-events-data
    handler: FormHandler
    kwargs:
      url: sqlite:///$YAMLPATH/data/data.db
      table: mfr
      modify: adverse_events.serious_data(data, handler)

# Gramex init configurations for app: adverse-events v1
# ----------------------------------------------------------------------------
import:
  # /ui/ has Gramex UI components -- use this like the node_modules/ directory
  ui:
    path: $GRAMEXAPPS/ui/gramex.yaml
    YAMLURL: $YAMLURL/ui/
